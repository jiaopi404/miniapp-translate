"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var CryptoJs = require('crypto-js');
var Util = require("../../utils/util");
var http_1 = require("../../utils/http");
Page({
    data: {
        languageFlag: false,
        formData: {
            content: '18629287141'
        },
        translateData: {}
    },
    formInputChange: function (event) {
        this.setData({
            formData: {
                content: event.detail.value
            }
        });
    },
    handleSwitchLanguage: function () {
        this.setData({
            languageFlag: !this.data.languageFlag
        });
    },
    bindTranslate: function () {
        console.log('input value: ', this.data.formData.content);
        this.queryToYouDao(this.data.formData.content);
    },
    bindPlayPhonetic: function (event) {
        var speechUrl = event.currentTarget.dataset.speech;
        console.log('speechUrl is: ', speechUrl);
        var innerAudioContext = wx.createInnerAudioContext();
        innerAudioContext.autoplay = true;
        innerAudioContext.src = speechUrl;
        innerAudioContext.onPlay(function () {
            console.log('开始播放');
        });
        innerAudioContext.onError(function (res) {
            console.log(res.errMsg);
            console.log(res.errCode);
        });
    },
    queryToYouDao: function (query) {
        var _this = this;
        var appKey = '7dd76978737827f8';
        var key = 'LaAhd9Me9A6LFKuuOmidRjaDbTUkYvpX';
        var salt = Util.getUUid();
        var curtime = Math.round(+new Date() / 1000) + '';
        var from = this.data.languageFlag ? 'en' : 'zh-CHS';
        var to = this.data.languageFlag ? 'zh-CHS' : 'en';
        var str1 = appKey + Util.truncate(query) + salt + curtime + key;
        var sign = CryptoJs.SHA256(str1).toString(CryptoJs.enc.Hex);
        http_1.default.request({
            url: 'http://openapi.youdao.com/api',
            method: 'POST',
            data: {
                q: query,
                appKey: appKey,
                salt: salt,
                from: from,
                to: to,
                sign: sign,
                signType: 'v3',
                curtime: curtime,
                strict: 'true'
            }
        }).then(function (res) {
            _this.setData({
                translateData: res
            });
        }).catch(function (err) {
            console.log('err is: ', err);
        });
    },
    onLoad: function () {
    },
    onReady: function () {
    },
    onShow: function () {
    },
    onHide: function () {
    },
    onUnload: function () {
    },
    onPullDownRefresh: function () {
    },
    onReachBottom: function () {
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNsYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidHJhbnNsYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsSUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3RDLHVDQUF5QztBQUN6Qyx5Q0FBbUM7QUFHbkMsSUFBSSxDQUFDO0lBS0gsSUFBSSxFQUFFO1FBQ0osWUFBWSxFQUFFLEtBQUs7UUFDbkIsUUFBUSxFQUFFO1lBQ1IsT0FBTyxFQUFFLGFBQWE7U0FDdkI7UUFDRCxhQUFhLEVBQUUsRUFBRTtLQUNsQjtJQU1ELGVBQWUsWUFBRSxLQUFzQztRQUNyRCxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsUUFBUSxFQUFFO2dCQUNSLE9BQU8sRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUs7YUFDNUI7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDO0lBS0Qsb0JBQW9CO1FBQ2xCLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWCxZQUFZLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVk7U0FDdEMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELGFBQWE7UUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN6RCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ2hELENBQUM7SUFLRCxnQkFBZ0IsWUFBRSxLQUFVO1FBQ2xCLElBQUEsOENBQWlCLENBQWdDO1FBQ3pELE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsU0FBUyxDQUFDLENBQUE7UUFDeEMsSUFBTSxpQkFBaUIsR0FBRyxFQUFFLENBQUMsdUJBQXVCLEVBQUUsQ0FBQTtRQUN0RCxpQkFBaUIsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFBO1FBQ2pDLGlCQUFpQixDQUFDLEdBQUcsR0FBRyxTQUFTLENBQUE7UUFDakMsaUJBQWlCLENBQUMsTUFBTSxDQUFDO1lBQ3ZCLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDckIsQ0FBQyxDQUFDLENBQUE7UUFDRixpQkFBaUIsQ0FBQyxPQUFPLENBQUMsVUFBQyxHQUFHO1lBQzVCLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFBO1lBQ3ZCLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQzFCLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQU1ELGFBQWEsWUFBRSxLQUFZO1FBQTNCLGlCQStCQztRQTlCQyxJQUFNLE1BQU0sR0FBRyxrQkFBa0IsQ0FBQztRQUNsQyxJQUFNLEdBQUcsR0FBRyxrQ0FBa0MsQ0FBQztRQUMvQyxJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDNUIsSUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ3BELElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQztRQUN0RCxJQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDcEQsSUFBTSxJQUFJLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxHQUFHLE9BQU8sR0FBRyxHQUFHLENBQUM7UUFDbEUsSUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUU5RCxjQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsR0FBRyxFQUFFLCtCQUErQjtZQUNwQyxNQUFNLEVBQUUsTUFBTTtZQUNkLElBQUksRUFBRTtnQkFDSixDQUFDLEVBQUUsS0FBSztnQkFDUixNQUFNLFFBQUE7Z0JBQ04sSUFBSSxNQUFBO2dCQUNKLElBQUksTUFBQTtnQkFDSixFQUFFLElBQUE7Z0JBQ0YsSUFBSSxNQUFBO2dCQUNKLFFBQVEsRUFBRSxJQUFJO2dCQUNkLE9BQU8sU0FBQTtnQkFDUCxNQUFNLEVBQUUsTUFBTTthQUNmO1NBQ0YsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFDLEdBQWM7WUFDckIsS0FBSSxDQUFDLE9BQU8sQ0FBQztnQkFDWCxhQUFhLEVBQUUsR0FBRzthQUNuQixDQUFDLENBQUE7UUFDSixDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBQSxHQUFHO1lBQ1YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsR0FBRyxDQUFDLENBQUE7UUFDOUIsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0lBTUQsTUFBTSxFQUFFO0lBRVIsQ0FBQztJQUtELE9BQU8sRUFBRTtJQUVULENBQUM7SUFLRCxNQUFNLEVBQUU7SUFFUixDQUFDO0lBS0QsTUFBTSxFQUFFO0lBRVIsQ0FBQztJQUtELFFBQVEsRUFBRTtJQUVWLENBQUM7SUFLRCxpQkFBaUIsRUFBRTtJQUVuQixDQUFDO0lBS0QsYUFBYSxFQUFFO0lBRWYsQ0FBQztDQUNGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIG1pbmlwcm9ncmFtL3BhZ2VzL3RyYW5zbGF0ZS90cmFuc2xhdGUuanNcbi8vIGltcG9ydCB7IHJlcXVlc3QgfSBmcm9tICcuLi8uLi91dGlscy9odHRwJ1xuY29uc3QgQ3J5cHRvSnMgPSByZXF1aXJlKCdjcnlwdG8tanMnKTtcbmltcG9ydCAqIGFzIFV0aWwgZnJvbSAnLi4vLi4vdXRpbHMvdXRpbCc7XG5pbXBvcnQgSHR0cCBmcm9tICcuLi8uLi91dGlscy9odHRwJ1xuaW1wb3J0IHsgWW91RGFvUmVzcCB9IGZyb20gJy4uLy4uL3R5cGVzL3lvdWRhbydcblxuUGFnZSh7XG5cbiAgLyoqXG4gICAqIOmhtemdoueahOWIneWni+aVsOaNrlxuICAgKi9cbiAgZGF0YToge1xuICAgIGxhbmd1YWdlRmxhZzogZmFsc2UsXG4gICAgZm9ybURhdGE6IHtcbiAgICAgIGNvbnRlbnQ6ICcxODYyOTI4NzE0MSdcbiAgICB9LFxuICAgIHRyYW5zbGF0ZURhdGE6IHt9XG4gIH0sXG5cbiAgLyoqXG4gICAqIOihqOWNlei+k+WFpSBjaGFuZ2UgaGFuZGxlclxuICAgKiBAcGFyYW0gZXZlbnRcbiAgICovXG4gIGZvcm1JbnB1dENoYW5nZSAoZXZlbnQ6IHsgZGV0YWlsOiB7IHZhbHVlOiBzdHJpbmc7IH07IH0pIHtcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgZm9ybURhdGE6IHtcbiAgICAgICAgY29udGVudDogZXZlbnQuZGV0YWlsLnZhbHVlXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOeCueWHu+WIh+aNouivreiogFxuICAgKi9cbiAgaGFuZGxlU3dpdGNoTGFuZ3VhZ2UgKCkge1xuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBsYW5ndWFnZUZsYWc6ICF0aGlzLmRhdGEubGFuZ3VhZ2VGbGFnXG4gICAgfSk7XG4gIH0sXG5cbiAgYmluZFRyYW5zbGF0ZSAoKSB7XG4gICAgY29uc29sZS5sb2coJ2lucHV0IHZhbHVlOiAnLCB0aGlzLmRhdGEuZm9ybURhdGEuY29udGVudCk7XG4gICAgdGhpcy5xdWVyeVRvWW91RGFvKHRoaXMuZGF0YS5mb3JtRGF0YS5jb250ZW50KVxuICB9LFxuICAvKipcbiAgICog5pKt5pS+5Y+R6Z+zXG4gICAqIEBwYXJhbSBldmVudFxuICAgKi9cbiAgYmluZFBsYXlQaG9uZXRpYyAoZXZlbnQ6IGFueSkge1xuICAgIGNvbnN0IHsgc3BlZWNoOiBzcGVlY2hVcmwgfSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldFxuICAgIGNvbnNvbGUubG9nKCdzcGVlY2hVcmwgaXM6ICcsIHNwZWVjaFVybClcbiAgICBjb25zdCBpbm5lckF1ZGlvQ29udGV4dCA9IHd4LmNyZWF0ZUlubmVyQXVkaW9Db250ZXh0KClcbiAgICBpbm5lckF1ZGlvQ29udGV4dC5hdXRvcGxheSA9IHRydWVcbiAgICBpbm5lckF1ZGlvQ29udGV4dC5zcmMgPSBzcGVlY2hVcmxcbiAgICBpbm5lckF1ZGlvQ29udGV4dC5vblBsYXkoKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ+W8gOWni+aSreaUvicpXG4gICAgfSlcbiAgICBpbm5lckF1ZGlvQ29udGV4dC5vbkVycm9yKChyZXMpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlcy5lcnJNc2cpXG4gICAgICBjb25zb2xlLmxvZyhyZXMuZXJyQ29kZSlcbiAgICB9KVxuICB9LFxuXG4gIC8qKlxuICAgKiDlkJEgb3BlbkFQSSDov5vooYzor7fmsYJcbiAgICogQHBhcmFtIHF1ZXJ5XG4gICAqL1xuICBxdWVyeVRvWW91RGFvIChxdWVyeTpzdHJpbmcpIHtcbiAgICBjb25zdCBhcHBLZXkgPSAnN2RkNzY5Nzg3Mzc4MjdmOCc7XG4gICAgY29uc3Qga2V5ID0gJ0xhQWhkOU1lOUE2TEZLdXVPbWlkUmphRGJUVWtZdnBYJztcbiAgICBjb25zdCBzYWx0ID0gVXRpbC5nZXRVVWlkKCk7XG4gICAgY29uc3QgY3VydGltZSA9IE1hdGgucm91bmQoK25ldyBEYXRlKCkgLyAxMDAwKSArICcnO1xuICAgIGNvbnN0IGZyb20gPSB0aGlzLmRhdGEubGFuZ3VhZ2VGbGFnID8gJ2VuJyA6ICd6aC1DSFMnO1xuICAgIGNvbnN0IHRvID0gdGhpcy5kYXRhLmxhbmd1YWdlRmxhZyA/ICd6aC1DSFMnIDogJ2VuJztcbiAgICBjb25zdCBzdHIxID0gYXBwS2V5ICsgVXRpbC50cnVuY2F0ZShxdWVyeSkgKyBzYWx0ICsgY3VydGltZSArIGtleTtcbiAgICBjb25zdCBzaWduID0gQ3J5cHRvSnMuU0hBMjU2KHN0cjEpLnRvU3RyaW5nKENyeXB0b0pzLmVuYy5IZXgpO1xuXG4gICAgSHR0cC5yZXF1ZXN0KHtcbiAgICAgIHVybDogJ2h0dHA6Ly9vcGVuYXBpLnlvdWRhby5jb20vYXBpJyxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgZGF0YToge1xuICAgICAgICBxOiBxdWVyeSxcbiAgICAgICAgYXBwS2V5LFxuICAgICAgICBzYWx0LFxuICAgICAgICBmcm9tLFxuICAgICAgICB0byxcbiAgICAgICAgc2lnbixcbiAgICAgICAgc2lnblR5cGU6ICd2MycsXG4gICAgICAgIGN1cnRpbWUsXG4gICAgICAgIHN0cmljdDogJ3RydWUnXG4gICAgICB9XG4gICAgfSkudGhlbigocmVzOllvdURhb1Jlc3ApID0+IHtcbiAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgIHRyYW5zbGF0ZURhdGE6IHJlc1xuICAgICAgfSlcbiAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ2VyciBpczogJywgZXJyKVxuICAgIH0pXG4gIH0sXG5cblxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLliqDovb1cbiAgICovXG4gIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuXG4gIH0sXG5cbiAgLyoqXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5Yid5qyh5riy5p+T5a6M5oiQXG4gICAqL1xuICBvblJlYWR5OiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLmmL7npLpcbiAgICovXG4gIG9uU2hvdzogZnVuY3Rpb24gKCkge1xuXG4gIH0sXG5cbiAgLyoqXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i6ZqQ6JePXG4gICAqL1xuICBvbkhpZGU6IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWNuOi9vVxuICAgKi9cbiAgb25VbmxvYWQ6IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDpobXpnaLnm7jlhbPkuovku7blpITnkIblh73mlbAtLeebkeWQrOeUqOaIt+S4i+aLieWKqOS9nFxuICAgKi9cbiAgb25QdWxsRG93blJlZnJlc2g6IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDpobXpnaLkuIrmi4nop6blupXkuovku7bnmoTlpITnkIblh73mlbBcbiAgICovXG4gIG9uUmVhY2hCb3R0b206IGZ1bmN0aW9uICgpIHtcblxuICB9XG59KVxuIl19